{"version":3,"file":"index.min.js","sources":["index.js"],"sourcesContent":["const Reflect = window.Reflect;\n\nconst {get: get, has: has, set: set} = Reflect;\n\nfunction isobject(a) {\n    return typeof a === \"object\" && a !== null;\n}\n\nfunction isfunction(a) {\n    return typeof a === \"function\";\n}\n\nfunction isclassextendsHTMLElement(initclass) {\n    return !!(isfunction(initclass) && initclass.prototype && initclass.prototype instanceof HTMLElement);\n}\n\nconst invalid_custom_element_class = \"invalid custom element class !\";\n\nif (!isobject(window.customElements)) {\n    console.error(\" customElements  not supported !\");\n    throw new TypeError(\" customElements  not supported !\");\n}\n\nfunction 使用value从表中查询key(表, 组件状态名) {\n    const outputentrie = Object.entries(表).find((v => v[1] === 组件状态名));\n    return outputentrie ? outputentrie[0] : undefined;\n}\n\nwindow.CustomElementRegistry = Reflect.get(window.customElements, \"constructor\");\n\nconst elementmap = Symbol.for(\"elementmap\");\n\nconst {CustomElementRegistry: CustomElementRegistry} = window;\n\nconst customElements = window.customElements;\n\nif (!has(customElements, elementmap)) {\n    set(customElements, elementmap, Object.create(null));\n}\n\nconst RandomDefine = (initclass, extendsname) => RandomDefineCustomElement(initclass, extendsname);\n\nfunction RandomDefineCustomElement(initclass, extendsname, length = 1) {\n    if (!isclassextendsHTMLElement(initclass)) {\n        console.error(initclass);\n        console.error(invalid_custom_element_class);\n        throw TypeError(\"invalid custom element class !\");\n    }\n    if (!Object.values(customElements[elementmap]).includes(initclass)) {\n        const elementname = getrandomstringandnumber(length);\n        if (customElements.get(elementname)) {\n            return RandomDefineCustomElement(initclass, extendsname, length + 1);\n        } else {\n            if (extendsname) {\n                customElements.define(elementname, initclass, {\n                    extends: extendsname\n                });\n            } else {\n                customElements.define(elementname, initclass);\n            }\n        }\n        return elementname;\n    } else {\n        return 使用value从表中查询key(get(customElements, elementmap), initclass);\n    }\n}\n\ncustomElements.define = function(name, constructor, options) {\n    CustomElementRegistry.prototype.define.call(customElements, name, constructor, options);\n    customElements[elementmap][name] = constructor;\n};\n\nconst charactorlist = Array(26).fill(undefined).map(((v, i) => 97 + i)).map((n => String.fromCharCode(n)));\n\nconst hexnumberlist = Array(16).fill(undefined).map(((v, i) => i)).map((a => a.toString(16)));\n\nconst charactorandnumberlist = [ ...new Set([ ...hexnumberlist, ...charactorlist ]) ];\n\nfunction getrandomcharactor() {\n    return get(charactorlist, Math.floor(Math.random() * charactorlist.length));\n}\n\nfunction getrandomhexnumberandcharactor() {\n    return get(charactorandnumberlist, Math.floor(Math.random() * charactorandnumberlist.length));\n}\n\nfunction getrandomstringandnumber(length = 1) {\n    return Array(length).fill(undefined).map((() => getrandomcharactor())).join(\"\") + \"-\" + Array(length).fill(undefined).map((() => getrandomhexnumberandcharactor())).join(\"\");\n}\n\nexport { RandomDefine as default };\n//# sourceMappingURL=index.js.map\n"],"names":["Reflect","window","get","has","set","a","customElements","TypeError","CustomElementRegistry","elementmap","Symbol","for","Object","create","RandomDefine","initclass","extendsname","RandomDefineCustomElement","length","prototype","HTMLElement","isclassextendsHTMLElement","values","includes","表","组件状态名","outputentrie","entries","find","v","undefined","使用value从表中查询key","elementname","Array","fill","map","charactorlist","Math","floor","random","join","charactorandnumberlist","getrandomstringandnumber","define","extends","name","constructor","options","call","i","n","String","fromCharCode","hexnumberlist","toString","Set"],"mappings":"AAAA,MAAMA,IAAUC,OAAOD,UAEhBE,KAAKA,GAAKC,KAAKA,GAAKC,KAAKA,KAAOJ;;AAgBvC,IAbwB,oBADNK,IAcJJ,OAAOK,mBAbqB,SAAND,GAehC,MAAM,IAAIE,UAAU;;AAhBxB,IAAkBF;;AAwBlBJ,OAAOO,wBAAwBR,EAAQE,IAAID,OAAOK,gBAAgB;;AAElE,MAAMG,IAAaC,OAAOC,IAAI,gBAEvBH,uBAAuBA,KAAyBP,QAEjDK,IAAiBL,OAAOK;;AAEzBH,EAAIG,GAAgBG,MACrBL,EAAIE,GAAgBG,GAAYG,OAAOC,OAAO;;AAG7C,MAACC,IAAe,CAACC,GAAWC,MAAgBC,EAA0BF,GAAWC;;AAEtF,SAASC,EAA0BF,GAAWC,GAAaE,IAAS;IAChE,KA/BJ,SAAmCH;QAC/B,UAJoB,qBAICA,KAAcA,EAAUI,aAAaJ,EAAUI,qBAAqBC;KA8BpFC,CAA0BN,IAG3B,MAAMR,UAAU;IAEpB,IAAKK,OAAOU,OAAOhB,EAAeG,IAAac,SAASR,IAepD,OAxCR,SAAyBS,GAAGC;QACxB,MAAMC,IAAed,OAAOe,QAAQH,GAAGI,MAAMC,KAAKA,EAAE,OAAOJ;QAC3D,OAAOC,IAAeA,EAAa,UAAKI;KAsC7BC,CAAgB7B,EAAII,GAAgBG,IAAaM;IAfQ;QAChE,MAAMiB,IAqCd,SAAkCd,IAAS;YACvC,OAAOe,MAAMf,GAAQgB,UAAKJ,GAAWK,WAR9BjC,EAAIkC,GAAeC,KAAKC,MAAMD,KAAKE,WAAWH,EAAclB,WAQIsB,KAAK,MAAM,MAAMP,MAAMf,GAAQgB,UAAKJ,GAAWK,WAJ/GjC,EAAIuC,GAAwBJ,KAAKC,MAAMD,KAAKE,WAAWE,EAAuBvB,WAI+EsB,KAAK;SAtCjJE,CAAyBxB;QAC7C,OAAIZ,EAAeJ,IAAI8B,KACZf,EAA0BF,GAAWC,GAAaE,IAAS,MAE9DF,IACAV,EAAeqC,OAAOX,GAAajB,GAAW;YAC1C6B,SAAS5B;aAGbV,EAAeqC,OAAOX,GAAajB,IAGpCiB;;;;AAMf1B,EAAeqC,SAAS,SAASE,GAAMC,GAAaC;IAChDvC,EAAsBW,UAAUwB,OAAOK,KAAK1C,GAAgBuC,GAAMC,GAAaC,IAC/EzC,EAAeG,GAAYoC,KAAQC;;;AAGvC,MAAMV,IAAgBH,MAAM,IAAIC,UAAKJ,GAAWK,MAAMN,GAAGoB,MAAM,KAAKA,IAAId,KAAKe,KAAKC,OAAOC,aAAaF,MAEhGG,IAAgBpB,MAAM,IAAIC,UAAKJ,GAAWK,MAAMN,GAAGoB,MAAMA,IAAId,KAAK9B,KAAKA,EAAEiD,SAAS,OAElFb,IAAyB,KAAK,IAAIc,IAAI,KAAKF,MAAkBjB;;"}