{"version":3,"file":"index.min.js","sources":["index.js"],"sourcesContent":["const Reflect = window.Reflect;\n\nconst {get: get, has: has, set: set} = Reflect;\n\nfunction isobject(a) {\n    return typeof a === \"object\" && a !== null;\n}\n\nfunction isfunction(a) {\n    return typeof a === \"function\";\n}\n\nfunction isclassextendsHTMLElement(initclass) {\n    return !!(isfunction(initclass) && initclass.prototype && initclass.prototype instanceof HTMLElement);\n}\n\nconst invalid_custom_element_class = \"invalid custom element class !\";\n\nif (!isobject(window.customElements)) {\n    console.error(\" customElements  not supported !\");\n    throw new TypeError(\" customElements  not supported !\");\n}\n\nfunction 使用value从表中查询key(表, 组件状态名) {\n    const outputentrie = Object.entries(表).find((v => v[1] === 组件状态名));\n    return outputentrie ? outputentrie[0] : undefined;\n}\n\nwindow.CustomElementRegistry = Reflect.get(window.customElements, \"constructor\");\n\nconst elementset = Symbol.for(\"elementset\");\n\nconst elementmap = Symbol.for(\"elementmap\");\n\nconst {CustomElementRegistry: CustomElementRegistry} = window;\n\nconst customElements = window.customElements;\n\nif (!has(customElements, elementset)) {\n    set(customElements, elementset, new Set);\n}\n\nif (!has(customElements, elementmap)) {\n    set(customElements, elementmap, Object.create(null));\n}\n\nvar RandomDefine = (initclass, extendsname) => RandomDefineCustomElement(initclass, extendsname);\n\nfunction RandomDefineCustomElement(initclass, extendsname, length = 1) {\n    if (!isclassextendsHTMLElement(initclass)) {\n        console.error(initclass);\n        console.error(invalid_custom_element_class);\n        throw TypeError(\"invalid custom element class !\");\n    }\n    if (!get(customElements, elementset).has(initclass)) {\n        const elementname = getrandomstringandnumber(length);\n        if (customElements.get(elementname)) {\n            return RandomDefineCustomElement(initclass, extendsname, length + 1);\n        } else {\n            if (extendsname) {\n                customElements.define(elementname, initclass, {\n                    extends: extendsname\n                });\n            } else {\n                customElements.define(elementname, initclass);\n            }\n        }\n        return elementname;\n    } else {\n        return 使用value从表中查询key(get(customElements, elementmap), initclass);\n    }\n}\n\ncustomElements.define = function(name, constructor, options) {\n    if (!isclassextendsHTMLElement(constructor)) {\n        console.error(constructor);\n        console.error(invalid_custom_element_class);\n        throw TypeError(\"invalid custom element class !\");\n    }\n    if (!get(customElements, elementset).has(constructor)) {\n        if (has(customElements[elementmap], name)) {\n            RandomDefineCustomElement(constructor, options ? options.extends : undefined);\n        } else {\n            CustomElementRegistry.prototype.define.call(customElements, name, constructor, options);\n            customElements[elementset].add(constructor);\n            customElements[elementmap][name] = constructor;\n        }\n    } else {\n        CustomElementRegistry.prototype.define.call(customElements, name, constructor, options);\n    }\n};\n\nset(customElements, Symbol.iterator, (() => {\n    const entries = Object.entries(customElements[elementmap]);\n    return entries[Symbol.iterator].call(entries);\n}));\n\nconst charactorlist = Array(26).fill(undefined).map(((v, i) => 97 + i)).map((n => String.fromCharCode(n)));\n\nconst hexnumberlist = Array(16).fill(undefined).map(((v, i) => i)).map((a => a.toString(16)));\n\nconst charactorandnumberlist = [ ...new Set([ ...hexnumberlist, ...charactorlist ]) ];\n\nfunction getrandomcharactor() {\n    return get(charactorlist, Math.floor(Math.random() * charactorlist.length));\n}\n\nfunction getrandomhexnumberandcharactor() {\n    return get(charactorandnumberlist, Math.floor(Math.random() * charactorandnumberlist.length));\n}\n\nfunction getrandomstringandnumber(length = 1) {\n    return Array(length).fill(undefined).map((() => getrandomcharactor())).join(\"\") + \"-\" + Array(length).fill(undefined).map((() => getrandomhexnumberandcharactor())).join(\"\");\n}\n\nexport { RandomDefine as default };\n//# sourceMappingURL=index.js.map\n"],"names":["Reflect","window","get","has","set","isclassextendsHTMLElement","initclass","prototype","HTMLElement","a","customElements","TypeError","CustomElementRegistry","elementset","Symbol","for","elementmap","Set","Object","create","RandomDefine","extendsname","RandomDefineCustomElement","length","表","组件状态名","outputentrie","entries","find","v","undefined","使用value从表中查询key","elementname","Array","fill","map","charactorlist","Math","floor","random","join","charactorandnumberlist","getrandomstringandnumber","define","extends","name","constructor","options","call","add","iterator","i","n","String","fromCharCode","hexnumberlist","toString"],"mappings":"AAAA,MAAMA,IAAUC,OAAOD,UAEhBE,KAAKA,GAAKC,KAAKA,GAAKC,KAAKA,KAAOJ;;AAUvC,SAASK,EAA0BC;IAC/B,UAJoB,qBAICA,KAAcA,EAAUC,aAAaD,EAAUC,qBAAqBC;;;AAK7F,IAbwB,oBADNC,IAcJR,OAAOS,mBAbqB,SAAND,GAehC,MAAM,IAAIE,UAAU;;AAhBxB,IAAkBF;;AAwBlBR,OAAOW,wBAAwBZ,EAAQE,IAAID,OAAOS,gBAAgB;;AAElE,MAAMG,IAAaC,OAAOC,IAAI,eAExBC,IAAaF,OAAOC,IAAI,gBAEvBH,uBAAuBA,KAAyBX,QAEjDS,IAAiBT,OAAOS;;AAEzBP,EAAIO,GAAgBG,MACrBT,EAAIM,GAAgBG,GAAY,IAAII,MAGnCd,EAAIO,GAAgBM,MACrBZ,EAAIM,GAAgBM,GAAYE,OAAOC,OAAO;;AAG/C,IAACC,IAAe,CAACd,GAAWe,MAAgBC,EAA0BhB,GAAWe;;AAEpF,SAASC,EAA0BhB,GAAWe,GAAaE,IAAS;IAChE,KAAKlB,EAA0BC,IAG3B,MAAMK,UAAU;IAEpB,IAAKT,EAAIQ,GAAgBG,GAAYV,IAAIG,IAerC,OA9CR,SAAyBkB,GAAGC;QACxB,MAAMC,IAAeR,OAAOS,QAAQH,GAAGI,MAAMC,KAAKA,EAAE,OAAOJ;QAC3D,OAAOC,IAAeA,EAAa,UAAKI;KA4C7BC,CAAgB7B,EAAIQ,GAAgBM,IAAaV;IAfP;QACjD,MAAM0B,IAwDd,SAAkCT,IAAS;YACvC,OAAOU,MAAMV,GAAQW,UAAKJ,GAAWK,WAR9BjC,EAAIkC,GAAeC,KAAKC,MAAMD,KAAKE,WAAWH,EAAcb,WAQIiB,KAAK,MAAM,MAAMP,MAAMV,GAAQW,UAAKJ,GAAWK,WAJ/GjC,EAAIuC,GAAwBJ,KAAKC,MAAMD,KAAKE,WAAWE,EAAuBlB,WAI+EiB,KAAK;SAzDjJE,CAAyBnB;QAC7C,OAAIb,EAAeR,IAAI8B,KACZV,EAA0BhB,GAAWe,GAAaE,IAAS,MAE9DF,IACAX,EAAeiC,OAAOX,GAAa1B,GAAW;YAC1CsC,SAASvB;aAGbX,EAAeiC,OAAOX,GAAa1B,IAGpC0B;;;;AAMftB,EAAeiC,SAAS,SAASE,GAAMC,GAAaC;IAChD,KAAK1C,EAA0ByC,IAG3B,MAAMnC,UAAU;IAEfT,EAAIQ,GAAgBG,GAAYV,IAAI2C,KASrClC,EAAsBL,UAAUoC,OAAOK,KAAKtC,GAAgBmC,GAAMC,GAAaC,KAR3E5C,EAAIO,EAAeM,IAAa6B,KAChCvB,EAA0BwB,GAAaC,IAAUA,EAAQH,eAAUd,MAEnElB,EAAsBL,UAAUoC,OAAOK,KAAKtC,GAAgBmC,GAAMC,GAAaC;IAC/ErC,EAAeG,GAAYoC,IAAIH,IAC/BpC,EAAeM,GAAY6B,KAAQC;GAO/C1C,EAAIM,GAAgBI,OAAOoC;IACvB,MAAMvB,IAAUT,OAAOS,QAAQjB,EAAeM;IAC9C,OAAOW,EAAQb,OAAOoC,UAAUF,KAAKrB;;;AAGzC,MAAMS,IAAgBH,MAAM,IAAIC,UAAKJ,GAAWK,MAAMN,GAAGsB,MAAM,KAAKA,IAAIhB,KAAKiB,KAAKC,OAAOC,aAAaF,MAEhGG,IAAgBtB,MAAM,IAAIC,UAAKJ,GAAWK,MAAMN,GAAGsB,MAAMA,IAAIhB,KAAK1B,KAAKA,EAAE+C,SAAS,OAElFf,IAAyB,KAAK,IAAIxB,IAAI,KAAKsC,MAAkBnB;;"}