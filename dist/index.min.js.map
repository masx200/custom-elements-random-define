{"version":3,"file":"index.min.js","sources":["index.js"],"sourcesContent":["const Reflect = window.Reflect;\n\nconst {get: get, getPrototypeOf: getPrototypeOf, has: has, set: set} = Reflect;\n\nfunction isobject(a) {\n    return typeof a === \"object\" && a !== null;\n}\n\nfunction isfunction(a) {\n    return typeof a === \"function\";\n}\n\nfunction isclassextendsHTMLElement(initclass) {\n    return !!(isfunction(initclass) && initclass.prototype && initclass.prototype instanceof HTMLElement);\n}\n\nconst invalid_custom_element_class = \"invalid custom element class !\";\n\nif (!isobject(window.customElements)) {\n    console.error(\" customElements  not supported !\");\n    throw new TypeError;\n}\n\nfunction 使用value从表中查询key(表, 组件状态名) {\n    const outputentrie = Object.entries(表).find(v => v[1] === 组件状态名);\n    return outputentrie ? outputentrie[0] : undefined;\n}\n\nwindow.CustomElementRegistry = get(getPrototypeOf(window.customElements), \"constructor\");\n\nconst elementset = Symbol.for(\"elementset\");\n\nconst elementmap = Symbol.for(\"elementmap\");\n\nconst {CustomElementRegistry: CustomElementRegistry} = window;\n\nconst customElements = window.customElements;\n\nif (!has(customElements, elementset)) {\n    set(customElements, elementset, new Set);\n}\n\nif (!has(customElements, elementmap)) {\n    set(customElements, elementmap, Object.create(null));\n}\n\nvar RandomDefine = (initclass, extendsname) => RandomDefineCustomElement(initclass, extendsname);\n\nfunction RandomDefineCustomElement(initclass, extendsname, length = 1) {\n    if (!isclassextendsHTMLElement(initclass)) {\n        console.error(initclass);\n        console.error(invalid_custom_element_class);\n        throw TypeError();\n    }\n    if (!get(customElements, elementset).has(initclass)) {\n        const elementname = getrandomstringandnumber(length);\n        if (customElements.get(elementname)) {\n            return RandomDefineCustomElement(initclass, extendsname, length + 1);\n        } else {\n            if (extendsname) {\n                customElements.define(elementname, initclass, {\n                    extends: extendsname\n                });\n            } else {\n                customElements.define(elementname, initclass);\n            }\n        }\n        return elementname;\n    } else {\n        return 使用value从表中查询key(get(customElements, elementmap), initclass);\n    }\n}\n\ncustomElements.define = function(name, constructor, options) {\n    if (!isclassextendsHTMLElement(constructor)) {\n        console.error(constructor);\n        console.error(invalid_custom_element_class);\n        throw TypeError();\n    }\n    if (!get(customElements, elementset).has(constructor)) {\n        if (has(customElements[elementmap], name)) {\n            RandomDefineCustomElement(constructor, options ? options.extends : undefined);\n        } else {\n            CustomElementRegistry.prototype.define.call(customElements, name, constructor, options);\n            customElements[elementset].add(constructor);\n            customElements[elementmap][name] = constructor;\n        }\n    }\n};\n\nset(customElements, Symbol.iterator, () => {\n    const entries = Object.entries(customElements[elementmap]);\n    return entries[Symbol.iterator].call(entries);\n});\n\nconst charactorlist = Array(26).fill(undefined).map((v, i) => 97 + i).map(n => String.fromCharCode(n));\n\nconst hexnumberlist = Array(16).fill(undefined).map((v, i) => i).map(a => a.toString(16));\n\nconst charactorandnumberlist = [ ...new Set([ ...hexnumberlist, ...charactorlist ]) ];\n\nfunction getrandomcharactor() {\n    return get(charactorlist, Math.floor(Math.random() * charactorlist.length));\n}\n\nfunction getrandomhexnumberandcharactor() {\n    return get(charactorandnumberlist, Math.floor(Math.random() * charactorandnumberlist.length));\n}\n\nfunction getrandomstringandnumber(length = 1) {\n    return Array(length).fill(undefined).map(() => getrandomcharactor()).join(\"\") + \"-\" + Array(length).fill(undefined).map(() => getrandomhexnumberandcharactor()).join(\"\");\n}\n\nexport default RandomDefine;\n//# sourceMappingURL=index.js.map\n"],"names":["Reflect","window","get","getPrototypeOf","has","set","isclassextendsHTMLElement","initclass","prototype","HTMLElement","a","customElements","TypeError","CustomElementRegistry","elementset","Symbol","for","elementmap","Set","Object","create","RandomDefineCustomElement","extendsname","length","表","组件状态名","outputentrie","entries","find","v","undefined","使用value从表中查询key","elementname","Array","fill","map","charactorlist","Math","floor","random","join","charactorandnumberlist","getrandomstringandnumber","define","extends","name","constructor","options","call","add","iterator","i","n","String","fromCharCode","hexnumberlist","toString"],"mappings":"AAAA,MAAMA,EAAUC,OAAOD,SAEhBE,IAAKA,EAAKC,eAAgBA,EAAgBC,IAAKA,EAAKC,IAAKA,GAAOL,EAUvE,SAASM,EAA0BC,GAC/B,SAJoB,mBAICA,GAAcA,EAAUC,WAAaD,EAAUC,qBAAqBC,aAK7F,GAbwB,iBADNC,EAcJT,OAAOU,iBAbqB,OAAND,EAehC,MAAM,IAAIE,UAhBd,IAAkBF,EAwBlBT,OAAOY,sBAAwBX,EAAIC,EAAeF,OAAOU,gBAAiB,eAE1E,MAAMG,EAAaC,OAAOC,IAAI,cAExBC,EAAaF,OAAOC,IAAI,eAEvBH,sBAAuBA,GAAyBZ,OAEjDU,EAAiBV,OAAOU,eAEzBP,EAAIO,EAAgBG,IACrBT,EAAIM,EAAgBG,EAAY,IAAII,KAGnCd,EAAIO,EAAgBM,IACrBZ,EAAIM,EAAgBM,EAAYE,OAAOC,OAAO,OAKlD,SAASC,EAA0Bd,EAAWe,EAAaC,EAAS,GAChE,IAAKjB,EAA0BC,GAG3B,MAAMK,YAEV,GAAKV,EAAIS,EAAgBG,GAAYV,IAAIG,GAerC,OA9CR,SAAyBiB,EAAGC,GACxB,MAAMC,EAAeP,OAAOQ,QAAQH,GAAGI,KAAKC,GAAKA,EAAE,KAAOJ,GAC1D,OAAOC,EAAeA,EAAa,QAAKI,EA4C7BC,CAAgB7B,EAAIS,EAAgBM,GAAaV,GAfP,CACjD,MAAMyB,EAsDd,SAAkCT,EAAS,GACvC,OAAOU,MAAMV,GAAQW,UAAKJ,GAAWK,IAAI,IARlCjC,EAAIkC,EAAeC,KAAKC,MAAMD,KAAKE,SAAWH,EAAcb,UAQEiB,KAAK,IAAM,IAAMP,MAAMV,GAAQW,UAAKJ,GAAWK,IAAI,IAJjHjC,EAAIuC,EAAwBJ,KAAKC,MAAMD,KAAKE,SAAWE,EAAuBlB,UAI2EiB,KAAK,IAvD7IE,CAAyBnB,GAC7C,OAAIZ,EAAeT,IAAI8B,GACZX,EAA0Bd,EAAWe,EAAaC,EAAS,IAE9DD,EACAX,EAAegC,OAAOX,EAAazB,EAAW,CAC1CqC,QAAStB,IAGbX,EAAegC,OAAOX,EAAazB,GAGpCyB,IAMfrB,EAAegC,OAAS,SAASE,EAAMC,EAAaC,GAChD,IAAKzC,EAA0BwC,GAG3B,MAAMlC,YAELV,EAAIS,EAAgBG,GAAYV,IAAI0C,KACjC1C,EAAIO,EAAeM,GAAa4B,GAChCxB,EAA0ByB,EAAaC,EAAUA,EAAQH,aAAUd,IAEnEjB,EAAsBL,UAAUmC,OAAOK,KAAKrC,EAAgBkC,EAAMC,EAAaC,GAC/EpC,EAAeG,GAAYmC,IAAIH,GAC/BnC,EAAeM,GAAY4B,GAAQC,KAK/CzC,EAAIM,EAAgBI,OAAOmC,SAAU,KACjC,MAAMvB,EAAUR,OAAOQ,QAAQhB,EAAeM,IAC9C,OAAOU,EAAQZ,OAAOmC,UAAUF,KAAKrB,KAGzC,MAAMS,EAAgBH,MAAM,IAAIC,UAAKJ,GAAWK,IAAI,CAACN,EAAGsB,IAAM,GAAKA,GAAGhB,IAAIiB,GAAKC,OAAOC,aAAaF,IAE7FG,EAAgBtB,MAAM,IAAIC,UAAKJ,GAAWK,IAAI,CAACN,EAAGsB,IAAMA,GAAGhB,IAAIzB,GAAKA,EAAE8C,SAAS,KAE/Ef,EAAyB,IAAK,IAAIvB,IAAI,IAAKqC,KAAkBnB,mBArDhD,CAAC7B,EAAWe,IAAgBD,EAA0Bd,EAAWe"}