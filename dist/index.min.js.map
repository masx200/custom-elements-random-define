{"version":3,"file":"index.min.js","sources":["index.js"],"sourcesContent":["const Reflect = window.Reflect;\n\nconst {construct: construct, deleteProperty: deleteProperty, get: get, getOwnPropertyDescriptor: getOwnPropertyDescriptor, getPrototypeOf: getPrototypeOf, has: has, ownKeys: ownKeys, set: set} = Reflect;\n\nfunction isobject(a) {\n    return typeof a === \"object\" && a !== null;\n}\n\nfunction isfunction(a) {\n    return typeof a === \"function\";\n}\n\nfunction isclassextendsHTMLElement(initclass) {\n    return !!(isfunction(initclass) && initclass.prototype && initclass.prototype instanceof HTMLElement);\n}\n\nconst invalid_custom_element_class = \"invalid custom element class !\";\n\nif (!isobject(window.customElements)) {\n    throw new TypeError(\" customElements  not supported !\");\n}\n\nfunction 使用value从表中查询key(表, 组件状态名) {\n    return Object.entries(表).find(v => {\n        return v[1] === 组件状态名;\n    })[0];\n}\n\nwindow.CustomElementRegistry = get(getPrototypeOf(window.customElements), \"constructor\");\n\nconst {customElements: customElements, CustomElementRegistry: CustomElementRegistry} = window;\n\nconst elementset = Symbol.for(\"elementset\");\n\nconst elementmap = Symbol.for(\"elementmap\");\n\nvar RandomDefine = (initclass, extendsname) => RandomDefineCustomElement(initclass, extendsname);\n\nfunction RandomDefineCustomElement(initclass, extendsname, length = 1) {\n    if (!isclassextendsHTMLElement(initclass)) {\n        throw TypeError(invalid_custom_element_class);\n    }\n    if (!customElements[elementset].has(initclass)) {\n        const elementname = getrandomstringandnumber(length);\n        if (customElements.get(elementname)) {\n            return RandomDefineCustomElement(initclass, extendsname, length + 1);\n        } else {\n            if (extendsname) {\n                customElements.define(elementname, initclass, {\n                    extends: extendsname\n                });\n            } else {\n                customElements.define(elementname, initclass);\n            }\n        }\n        return elementname;\n    } else {\n        return 使用value从表中查询key(customElements[elementmap], initclass);\n    }\n}\n\nif (!customElements[elementset]) {\n    customElements[elementset] = new Set;\n}\n\nif (!customElements[elementmap]) {\n    customElements[elementmap] = {};\n}\n\ncustomElements.define = function(name, constructor, options) {\n    if (!isclassextendsHTMLElement(constructor)) {\n        console.error(constructor);\n        throw TypeError(invalid_custom_element_class);\n    }\n    if (!customElements[elementset].has(constructor)) {\n        if (has(customElements[elementmap], name)) {\n            RandomDefineCustomElement(constructor, options ? options.extends : undefined);\n        } else {\n            CustomElementRegistry.prototype.define.call(customElements, name, constructor, options);\n            customElements[elementset].add(constructor);\n            customElements[elementmap][name] = constructor;\n        }\n    }\n};\n\ncustomElements[Symbol.iterator] = () => {\n    const entries = Object.entries(customElements[elementmap]);\n    return entries[Symbol.iterator].call(entries);\n};\n\nfunction getrandomcharactor() {\n    return get(Array(26).fill(undefined).map((v, i) => 97 + i).map(n => String.fromCharCode(n)), Math.floor(Math.random() * 26));\n}\n\nfunction getrandomhexnumber() {\n    return get(Array(16).fill(undefined).map((v, i) => i), Math.floor(Math.random() * 16)).toString(16);\n}\n\nfunction getrandomstringandnumber(length = 4) {\n    return Array(length).fill(undefined).map(() => getrandomcharactor()).join(\"\") + \"-\" + Array(length).fill(undefined).map(() => getrandomhexnumber()).join(\"\");\n}\n\nexport default RandomDefine;\n//# sourceMappingURL=index.js.map\n"],"names":["Reflect","window","construct","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","has","ownKeys","set","isclassextendsHTMLElement","initclass","prototype","HTMLElement","invalid_custom_element_class","a","customElements","TypeError","CustomElementRegistry","elementset","Symbol","for","elementmap","RandomDefineCustomElement","extendsname","length","表","组件状态名","Object","entries","find","v","elementname","Array","fill","undefined","map","i","n","String","fromCharCode","Math","floor","random","join","toString","getrandomstringandnumber","define","extends","Set","name","constructor","options","call","add","iterator"],"mappings":"AAAA,MAAMA,EAAUC,OAAOD,SAEhBE,UAAWA,EAAWC,eAAgBA,EAAgBC,IAAKA,EAAKC,yBAA0BA,EAA0BC,eAAgBA,EAAgBC,IAAKA,EAAKC,QAASA,EAASC,IAAKA,GAAOT,EAUnM,SAASU,EAA0BC,GAC/B,SAJoB,mBAICA,GAAcA,EAAUC,WAAaD,EAAUC,qBAAqBC,aAG7F,MAAMC,EAA+B,iCAErC,GAbwB,iBADNC,EAcJd,OAAOe,iBAbqB,OAAND,EAchC,MAAM,IAAIE,UAAU,oCAfxB,IAAkBF,EAwBlBd,OAAOiB,sBAAwBd,EAAIE,EAAeL,OAAOe,gBAAiB,eAE1E,MAAOA,eAAgBA,EAAgBE,sBAAuBA,GAAyBjB,OAEjFkB,EAAaC,OAAOC,IAAI,cAExBC,EAAaF,OAAOC,IAAI,cAI9B,SAASE,EAA0BZ,EAAWa,EAAaC,EAAS,GAChE,IAAKf,EAA0BC,GAC3B,MAAMM,UAAUH,GAEpB,GAAKE,EAAeG,GAAYZ,IAAII,GAehC,OAnCiBe,EAmCMV,EAAeM,GAnClBK,EAmC+BhB,EAlChDiB,OAAOC,QAAQH,GAAGI,KAAKC,GACnBA,EAAE,KAAOJ,GACjB,GAiB6C,CAC5C,MAAMK,EAuDd,SAAkCP,EAAS,GACvC,OAAOQ,MAAMR,GAAQS,UAAKC,GAAWC,IAAI,IARlChC,EAAI6B,MAAM,IAAIC,UAAKC,GAAWC,IAAI,CAACL,EAAGM,IAAM,GAAKA,GAAGD,IAAIE,GAAKC,OAAOC,aAAaF,IAAKG,KAAKC,MAAsB,GAAhBD,KAAKE,YAQxCC,KAAK,IAAM,IAAMX,MAAMR,GAAQS,UAAKC,GAAWC,IAAI,IAJjHhC,EAAI6B,MAAM,IAAIC,UAAKC,GAAWC,IAAI,CAACL,EAAGM,IAAMA,GAAII,KAAKC,MAAsB,GAAhBD,KAAKE,WAAgBE,SAAS,KAIoDD,KAAK,IAxDjIE,CAAyBrB,GAC7C,OAAIT,EAAeZ,IAAI4B,GACZT,EAA0BZ,EAAWa,EAAaC,EAAS,IAE9DD,EACAR,EAAe+B,OAAOf,EAAarB,EAAW,CAC1CqC,QAASxB,IAGbR,EAAe+B,OAAOf,EAAarB,GAGpCqB,GAjCf,IAAyBN,EAAGC,EAuCvBX,EAAeG,KAChBH,EAAeG,GAAc,IAAI8B,KAGhCjC,EAAeM,KAChBN,EAAeM,GAAc,IAGjCN,EAAe+B,OAAS,SAASG,EAAMC,EAAaC,GAChD,IAAK1C,EAA0ByC,GAE3B,MAAMlC,UAAUH,GAEfE,EAAeG,GAAYZ,IAAI4C,KAC5B5C,EAAIS,EAAeM,GAAa4B,GAChC3B,EAA0B4B,EAAaC,EAAUA,EAAQJ,aAAUb,IAEnEjB,EAAsBN,UAAUmC,OAAOM,KAAKrC,EAAgBkC,EAAMC,EAAaC,GAC/EpC,EAAeG,GAAYmC,IAAIH,GAC/BnC,EAAeM,GAAY4B,GAAQC,KAK/CnC,EAAeI,OAAOmC,UAAY,KAC9B,MAAM1B,EAAUD,OAAOC,QAAQb,EAAeM,IAC9C,OAAOO,EAAQT,OAAOmC,UAAUF,KAAKxB,kBAnDtB,CAAClB,EAAWa,IAAgBD,EAA0BZ,EAAWa"}