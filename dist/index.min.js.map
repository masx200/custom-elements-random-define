{"version":3,"file":"index.min.js","sources":["index.js"],"sourcesContent":["const Reflect = window.Reflect;\n\nconst {apply: apply, construct: construct, defineProperty: defineProperty, deleteProperty: deleteProperty, get: get, getOwnPropertyDescriptor: getOwnPropertyDescriptor, getPrototypeOf: getPrototypeOf, has: has, ownKeys: ownKeys, set: set} = Reflect;\n\nfunction isobject(a) {\n    return typeof a === \"object\" && a !== null;\n}\n\nfunction isfunction(a) {\n    return typeof a === \"function\";\n}\n\nfunction isclassextendsHTMLElement(initclass) {\n    return !!(isfunction(initclass) && initclass.prototype && initclass.prototype instanceof HTMLElement);\n}\n\nconst invalid_custom_element_class = \"invalid custom element class !\";\n\nif (!isobject(window.customElements)) {\n    console.error(\" customElements  not supported !\");\n    throw new TypeError;\n}\n\nfunction 使用value从表中查询key(表, 组件状态名) {\n    const outputentrie = Object.entries(表).find(v => {\n        return v[1] === 组件状态名;\n    });\n    return outputentrie ? outputentrie[0] : undefined;\n}\n\nwindow.CustomElementRegistry = get(getPrototypeOf(window.customElements), \"constructor\");\n\nconst elementset = Symbol.for(\"elementset\");\n\nconst elementmap = Symbol.for(\"elementmap\");\n\nconst {CustomElementRegistry: CustomElementRegistry} = window;\n\nconst customElements = window.customElements;\n\nif (!has(customElements, elementset)) {\n    set(customElements, elementset, new Set);\n}\n\nif (!has(customElements, elementmap)) {\n    set(customElements, elementmap, {});\n}\n\nvar RandomDefine = (initclass, extendsname) => RandomDefineCustomElement(initclass, extendsname);\n\nfunction RandomDefineCustomElement(initclass, extendsname, length = 1) {\n    if (!isclassextendsHTMLElement(initclass)) {\n        console.error(initclass);\n        console.error(invalid_custom_element_class);\n        throw TypeError();\n    }\n    if (!get(customElements, elementset).has(initclass)) {\n        const elementname = getrandomstringandnumber(length);\n        if (customElements.get(elementname)) {\n            return RandomDefineCustomElement(initclass, extendsname, length + 1);\n        } else {\n            if (extendsname) {\n                customElements.define(elementname, initclass, {\n                    extends: extendsname\n                });\n            } else {\n                customElements.define(elementname, initclass);\n            }\n        }\n        return elementname;\n    } else {\n        return 使用value从表中查询key(get(customElements, elementmap), initclass);\n    }\n}\n\ncustomElements.define = function(name, constructor, options) {\n    if (!isclassextendsHTMLElement(constructor)) {\n        console.error(constructor);\n        console.error(invalid_custom_element_class);\n        throw TypeError();\n    }\n    if (!get(customElements, elementset).has(constructor)) {\n        if (has(customElements[elementmap], name)) {\n            RandomDefineCustomElement(constructor, options ? options.extends : undefined);\n        } else {\n            CustomElementRegistry.prototype.define.call(customElements, name, constructor, options);\n            customElements[elementset].add(constructor);\n            customElements[elementmap][name] = constructor;\n        }\n    }\n};\n\nset(customElements, Symbol.iterator, () => {\n    const entries = Object.entries(customElements[elementmap]);\n    return entries[Symbol.iterator].call(entries);\n});\n\nconst charactorlist = Array(26).fill(undefined).map((v, i) => 97 + i).map(n => String.fromCharCode(n));\n\nconst hexnumberlist = Array(16).fill(undefined).map((v, i) => i).map(a => a.toString(16));\n\nconst charactorandnumberlist = [ ...new Set([ ...hexnumberlist, ...charactorlist ]) ];\n\nfunction getrandomcharactor() {\n    return get(charactorlist, Math.floor(Math.random() * charactorlist.length));\n}\n\nfunction getrandomhexnumberandcharactor() {\n    return get(charactorandnumberlist, Math.floor(Math.random() * charactorandnumberlist.length));\n}\n\nfunction getrandomstringandnumber(length = 1) {\n    return Array(length).fill(undefined).map(() => getrandomcharactor()).join(\"\") + \"-\" + Array(length).fill(undefined).map(() => getrandomhexnumberandcharactor()).join(\"\");\n}\n\nexport default RandomDefine;\n//# sourceMappingURL=index.js.map\n"],"names":["Reflect","window","apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","has","ownKeys","set","isclassextendsHTMLElement","initclass","prototype","HTMLElement","a","customElements","TypeError","CustomElementRegistry","elementset","Symbol","for","elementmap","Set","RandomDefineCustomElement","extendsname","length","表","组件状态名","outputentrie","Object","entries","find","v","undefined","使用value从表中查询key","elementname","Array","fill","map","charactorlist","Math","floor","random","join","charactorandnumberlist","getrandomstringandnumber","define","extends","name","constructor","options","call","add","iterator","i","n","String","fromCharCode","hexnumberlist","toString"],"mappings":"AAAA,MAAMA,EAAUC,OAAOD,SAEhBE,MAAOA,EAAOC,UAAWA,EAAWC,eAAgBA,EAAgBC,eAAgBA,EAAgBC,IAAKA,EAAKC,yBAA0BA,EAA0BC,eAAgBA,EAAgBC,IAAKA,EAAKC,QAASA,EAASC,IAAKA,GAAOX,EAUjP,SAASY,EAA0BC,GAC/B,SAJoB,mBAICA,GAAcA,EAAUC,WAAaD,EAAUC,qBAAqBC,aAK7F,GAbwB,iBADNC,EAcJf,OAAOgB,iBAbqB,OAAND,EAehC,MAAM,IAAIE,UAhBd,IAAkBF,EA0BlBf,OAAOkB,sBAAwBb,EAAIE,EAAeP,OAAOgB,gBAAiB,eAE1E,MAAMG,EAAaC,OAAOC,IAAI,cAExBC,EAAaF,OAAOC,IAAI,eAEvBH,sBAAuBA,GAAyBlB,OAEjDgB,EAAiBhB,OAAOgB,eAEzBR,EAAIQ,EAAgBG,IACrBT,EAAIM,EAAgBG,EAAY,IAAII,KAGnCf,EAAIQ,EAAgBM,IACrBZ,EAAIM,EAAgBM,EAAY,IAKpC,SAASE,EAA0BZ,EAAWa,EAAaC,EAAS,GAChE,IAAKf,EAA0BC,GAG3B,MAAMK,YAEV,GAAKZ,EAAIW,EAAgBG,GAAYX,IAAII,GAerC,OAhDR,SAAyBe,EAAGC,GACxB,MAAMC,EAAeC,OAAOC,QAAQJ,GAAGK,KAAKC,GACjCA,EAAE,KAAOL,GAEpB,OAAOC,EAAeA,EAAa,QAAKK,EA4C7BC,CAAgB9B,EAAIW,EAAgBM,GAAaV,GAfP,CACjD,MAAMwB,EAsDd,SAAkCV,EAAS,GACvC,OAAOW,MAAMX,GAAQY,UAAKJ,GAAWK,IAAI,IARlClC,EAAImC,EAAeC,KAAKC,MAAMD,KAAKE,SAAWH,EAAcd,UAQEkB,KAAK,IAAM,IAAMP,MAAMX,GAAQY,UAAKJ,GAAWK,IAAI,IAJjHlC,EAAIwC,EAAwBJ,KAAKC,MAAMD,KAAKE,SAAWE,EAAuBnB,UAI2EkB,KAAK,IAvD7IE,CAAyBpB,GAC7C,OAAIV,EAAeX,IAAI+B,GACZZ,EAA0BZ,EAAWa,EAAaC,EAAS,IAE9DD,EACAT,EAAe+B,OAAOX,EAAaxB,EAAW,CAC1CoC,QAASvB,IAGbT,EAAe+B,OAAOX,EAAaxB,GAGpCwB,IAMfpB,EAAe+B,OAAS,SAASE,EAAMC,EAAaC,GAChD,IAAKxC,EAA0BuC,GAG3B,MAAMjC,YAELZ,EAAIW,EAAgBG,GAAYX,IAAI0C,KACjC1C,EAAIQ,EAAeM,GAAa2B,GAChCzB,EAA0B0B,EAAaC,EAAUA,EAAQH,aAAUd,IAEnEhB,EAAsBL,UAAUkC,OAAOK,KAAKpC,EAAgBiC,EAAMC,EAAaC,GAC/EnC,EAAeG,GAAYkC,IAAIH,GAC/BlC,EAAeM,GAAY2B,GAAQC,KAK/CxC,EAAIM,EAAgBI,OAAOkC,SAAU,KACjC,MAAMvB,EAAUD,OAAOC,QAAQf,EAAeM,IAC9C,OAAOS,EAAQX,OAAOkC,UAAUF,KAAKrB,KAGzC,MAAMS,EAAgBH,MAAM,IAAIC,UAAKJ,GAAWK,IAAI,CAACN,EAAGsB,IAAM,GAAKA,GAAGhB,IAAIiB,GAAKC,OAAOC,aAAaF,IAE7FG,EAAgBtB,MAAM,IAAIC,UAAKJ,GAAWK,IAAI,CAACN,EAAGsB,IAAMA,GAAGhB,IAAIxB,GAAKA,EAAE6C,SAAS,KAE/Ef,EAAyB,IAAK,IAAItB,IAAI,IAAKoC,KAAkBnB,mBArDhD,CAAC5B,EAAWa,IAAgBD,EAA0BZ,EAAWa"}